<div class="product product--single">
  <div class="container">
    <div class="row">
      <div class="col-tb-12 col-tb-push-1">
        <div class="row">
          <div class="col-dk-4 col--images">
            <div class="product__images">
              {% for image in product.images %}
              <div class="product__image" data-variants="[{{ image.variants | map: 'id' | join: ',' }}]">
                <div class="box box--3x2">
                  <div class="box__inner">
                    <div class="image image--cover {% if forloop.index0 == 0 %}image--load--fadein{% endif %}">
                      <img {% if forloop.index0 == 0 %}class="lazyload" data-{% endif %}src="{{ image | img_url: '1024x' }}" />
                    </div>
                  </div>
                </div>
              </div>
              {% endfor %}
            </div>

            <nav class="nav nav--thumbs">
              <ul class="product__thumbs">
                {% for image in product.images %}
                <li class="product__thumb" data-variants="[{{ image.variants | map: 'id' | join: ',' }}]">
                  <div class="box box--1x1">
                    <div class="box__inner">
                      <div class="image image--contain">
                        <img src="{{ image | img_url: '300x300' }}" />
                      </div>
                    </div>
                  </div>
                </li>
                {% endfor %}
              </ul>
            </nav>

            <nav class="nav nav--slick">
              <button class="nav--slick__prev">
                <span class="icon-chevron-thin-left"></span>
              </button>
              <div class="nav--slick__dots"></div>
              <button class="nav--slick__next">
                <span class="icon-chevron-thin-right"></span>
              </button>
            </nav>
          </div>



          <div class="col-dk-6 col-lg-5 col-lg-push-1 col-xxl-5">
            <!-- Tab links -->
            {% if product.has_only_default_variant %}
            {% else %}
            <h2>Select Variant </h2>
            {% endif %}

            <div class="tab">
              {% for variant in product.variants %}
                {% if product.has_only_default_variant %}
                  {% assign title = product.title %}
                {% else %}
                  {% assign title = variant.title %}
                {% endif %}
                {% if product.has_only_default_variant %}
                {% else %}
                {%if product.selected_or_first_available_variant.id == variant.id %}
                  <button class="tablinks tablinks--varients active" onclick="openvarientTab(event, '{{title}}')" data-price ="{{variant.price}}" data-id="{{variant.id}}">{{title}}</button>
                  {% else %}
                  <button class="tablinks tablinks--varients" onclick="openvarientTab(event, '{{title}}')"  data-price ="{{variant.price}}" data-id="{{variant.id}}">{{title}}</button>
                {% endif %}
              {% endif %}

              {% endfor %}
            </div>

            {% for variant in product.variants %}
              {% if product.has_only_default_variant %}
                {% assign title = product.title %}
              {% else %}
                {% assign title = variant.title %}
              {% endif %}
              {%if product.selected_or_first_available_variant.id == variant.id %}
              <div id="{{title}}" class="tabcontent" style="display:block;">
                <div class="product__title-price">
                  <h1 class="h3">{{ title }}</h1>
                  {% if variant.selected_or_first_available_variant.price > 1000000 %}
                    Fill out form to get pricing and information (it may take a few seconds to load)
                  {% else%}
                    {% include 'variant-price' %}
                    {% if variant.type == 'Refurb Robot' %}
                        <p style="color: #0074E4;"><strong>{{ variant.selected_or_first_available_variant.inventory_quantity }} in stock</strong></p>

                    {% endif %}
                  {% endif %}
                  <div class="product__description richtext">
                    {{ product.description }}
                  </div>
                </div>
              </div>
              {% else %}
                <div id="{{title}}" class="tabcontent">
                  <div class="product__title-price">
                    <h1 class="h3">{{ title }}</h1>
                    {% if variant.selected_or_first_available_variant.price > 1000000 %}
                      Fill out form to get pricing and information (it may take a few seconds to load)
                    {% else%}
                      {% include 'variant-price' %}
                      {% if variant.type == 'Refurb Robot' %}
                          <p style="color: #0074e4;"><strong>{{ variant.selected_or_first_available_variant.inventory_quantity }} in stock</strong></p>

                      {% endif %}
                    {% endif %}
                    <div class="product__description richtext">
                      {{ product.description }}
                    </div>
                  </div>
                </div>
              {% endif %}
            {% endfor %}

            {% include "robot-addon" %}
          </div>
        </div>

        {% if product.metafields.custom_fields["long_description"] %}
          <div class="col-dk-10 col-lg-10 col-xxl-10">
            <div class="row">
              <div class="tab">
                <button class="tablinks" onclick="openTab(event, 'Description')">Description</button>
                <button class="tablinks" onclick="openTab(event, 'Specifications')">Specification</button>
                <button class="tablinks" onclick="openTab(event, 'Downloads')">Downloads</button>
              </div>

              <div id="Description" class="tabcontent--table" style="display: block;"></p>
                {{ product.metafields.custom_fields["long_description"] }}
              </div>

              <div id="Specifications" class="tabcontent--table"></p>
                {{ product.metafields.custom_fields["specs"] }}
              </div>

              <div id="Downloads" class="tabcontent--table"></p>
                {{ product.metafields.custom_fields["spec_sheet_link"] }}
              </div>
            </div>
          </div>
        {% endif %}


        {% form "product", product %}
        <select name="id">
          {% for variant in product.variants %}
          <option {% if variant == product.selected_or_first_available_variant %} selected="selected" {% endif %}  value="{{ variant.id }}">{{ title }} - {{ variant.price | money }}</option>
          {% endfor %}
        </select>
        {% endform %}
      </div>
    </div>
  </div>

  {% if product.type == 'Robot' %}
    {% section 'volume-pricing' %}
     <div style="background-color: white;">...</div>
    {% section 'warranty-repair' %}
  {% endif %}

  <div class="product-banner">
    <div class="product-banner__title">{{ product.title }}</div>
    <div class="product-banner__right">
    {% if product.selected_or_first_available_variant.price > 1000000 %}
        Fill out form for pricing
    {% else %}
      <div class="product-banner__price">{{ product.selected_or_first_available_variant.price | money }}</div>
        <button class="button button--primary button--add-to-cart">
          <span>Add to Cart <span class="icon-arrow-large-right"></span></span>
        </button>
      </div>
    {% endif %}
  </div>
</div>



{% section 'get-in-touch' %}


<script type="text/javascript">
function openvarientTab(evt, tabName) {
  var i, tabcontent, tablinks;
  tabcontent = document.getElementsByClassName("tabcontent");
  for (i = 0; i < tabcontent.length; i++) {
    tabcontent[i].style.display = "none";
  }
  tablinks = document.getElementsByClassName("tablinks");
  for (i = 0; i < tablinks.length; i++) {
    tablinks[i].className = tablinks[i].className.replace(" active", "");
  }
  document.getElementById(tabName).style.display = "block";
  evt.currentTarget.className += " active";
}

function openTab(evt, tabName) {
  var i, tabcontent, tablinks;
  tabcontent = document.getElementsByClassName("tabcontent--table");
  for (i = 0; i < tabcontent.length; i++) {
    tabcontent[i].style.display = "none";
  }
  tablinks = document.getElementsByClassName("tablinks");
  for (i = 0; i < tablinks.length; i++) {
    tablinks[i].className = tablinks[i].className.replace(" active", "");
  }
  document.getElementById(tabName).style.display = "block";
  evt.currentTarget.className += " active";
}
  var product = {{ product | json }};
  var CURRENT_VARIENT_PRICE = {price: parseFloat("{{product.selected_or_first_available_variant.price}}"), id: "{{product.selected_or_first_available_variant.id}}" }
</script>
