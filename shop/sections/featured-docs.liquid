{% if section.blocks.size > 0 %}
  <div class="container">
    <h2 class="module__title">Documentation</h2>
    <div class="row">
      <div class="col-dk-8 col-dk-push-2">
        <div class="row">
          {% for block in section.blocks %}
          <div class="col-mb-12 col-mb-lg-6 col-dk-3" {{ block.shopify_attributes }}>
            {% assign image = block.settings.image %}
            {% assign width = image.width | times: 1.0 %}
            {% assign height = image.height | times: 1.0 %}
            {% assign percentage = height | divided_by: width | times: 100 %}
            <article class="article article--index article--index--small">
              <div class="box box--3x2">
                <div class="box__inner">
                  <a href="{{ block.settings.url }}">
                    <div class="image image--cover image--load--fadein">
                      <img class="lazyload" data-src="{{ image | img_url: '1000x1000' }}" />
                    </div>
                  </a>
                </div>
              </div>
              <h3 class="h6">
                <a href="{{ block.settings.url }}">
                  <span>{{ block.settings.title }}</span>
                  <span class="icon-triangle-right"></span>
                </a>
              </h3>
            </article>
          </div>
          {% endfor %}
        </div>
      </div>
    </div>

    {% assign text = section.settings.cta_text %}
    {% assign url = section.settings.cta_url %}

    {% if text and url %}
    <div class="row">
      <div class="col-dk-8 col-dk-push-2">
        <div class="cta">
          <a class="button button--primary"
             href="{{ url }}"><span>{{ text }}</span></a>
        </div>
      </div>
    </div>
    {% endif %}
  </div>
{% endif %}

{% schema %}
  {
    "name": "Featured Docs",
    "class": "module module--featured-docs",
    "settings": [
      {
        "id": "cta_text",
        "type": "text",
        "label": "CTA Text"
      },
      {
        "id": "cta_url",
        "type": "url",
        "label": "CTA URL"
      }
    ],
    "blocks": [
      {
        "type": "doc",
        "name": "Doc",
        "settings": [
          {
            "id": "title",
            "type": "text",
            "label": "Title"
          },
          {
            "id": "image",
            "type": "image_picker",
            "label": "Image"
          },
          {
            "id": "url",
            "type": "url",
            "label": "Url"
          }
        ]
      }
    ]
  }
{% endschema %}
